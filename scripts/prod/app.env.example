## Consul agent + per-service Envoy sidecars (per application VM)
##
## Copy to scripts/prod/app.env and edit per VM:
##   cp scripts/prod/app.env.example scripts/prod/app.env

# dc1 or dc2
CONSUL_DATACENTER=dc1

# This VM's IP (used in service registrations + health check targets)
HOST_IP=10.0.0.10

# Comma-separated Consul server IPs in THIS datacenter (LAN join targets)
CONSUL_RETRY_JOIN=10.0.0.21,10.0.0.22,10.0.0.23

# Optional hardening
# CONSUL_ENCRYPT=<gossip-key>

# Envoy image/flags (sidecars run Envoy from this image)
# ENVOY_IMAGE=docker.io/envoyproxy/envoy:v1.29-latest
# ENVOY_EXTRA_ARGS=--log-level info

# Optional: only start sidecars for these services (comma-separated service names).
# If omitted, sidecars are bootstrapped for all service templates under `docker/consul/services-vmhost/<dc>`.
# ENABLED_SERVICES=webservice,ordermanager,refdata,itch-feed

# Optional: override the directory containing Consul service registration templates for this host.
# Defaults to `docker/consul/services-vmhost/<dc>`.
# CONSUL_SERVICE_TEMPLATES_DIR=run/ansible/<host>/services

# Optional (dc1 demo only): enable the itch-consumer Envoy (requires app registration for itch-consumer on the VM)
# ENABLE_ITCH_CONSUMER=0
